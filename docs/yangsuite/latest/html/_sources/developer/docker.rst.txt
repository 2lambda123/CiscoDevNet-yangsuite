Building and publishing YANG Suite Docker images
================================================

When new releases of the YANG Suite core or any of its primary application
plugins are made, we need to also make a new release of the YANG Suite Docker
container. Eventually we will want to make this part of our Jenkins pipeline,
but for now, here are the relevant manual steps.

Build the image
---------------

Running ``make docker`` will build the Docker image and assign it a label
based on today's date. (Currently this command does not account for multiple
release builds in a single day by e.g. including a HHMMSS time stamp in the
label. Hopefully that's not something we'll need to do.)

Login to dockerhub.cisco.com
----------------------------

Contact yang-suite-dev@cisco.com for the deployer credentials if needed.

::

    docker login -u yang-tools-deployer -p $PASSWORD dockerhub.cisco.com

Tag and push the image to dockerhub.cisco.com
---------------------------------------------

::

    export DATESTAMP=`date "+%Y-%m-%d"`
    docker tag yangsuite:$DATESTAMP dockerhub.cisco.com/yang-tools-release-docker/yangsuite:$DATESTAMP
    docker push dockerhub.cisco.com/yang-tools-release-docker/yangsuite:$DATESTAMP

Also update the "latest" label::

    docker tag yangsuite:$DATESTAMP dockerhub.cisco.com/yang-tools-release-docker/yangsuite:latest
    docker push dockerhub.cisco.com/yang-tools-release-docker/yangsuite:latest
